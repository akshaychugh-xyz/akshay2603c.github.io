<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notes Page Design Explorer — akshaychugh.xyz</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --ui-bg: #1a1a2e;
    --ui-surface: #16213e;
    --ui-border: #2a2a4a;
    --ui-text: #e0e0e0;
    --ui-muted: #888;
    --ui-accent: #DA702C;
    --ui-accent-hover: #e8853f;

    /* Flexoki Light */
    --fl-bg: #FFFCF0;
    --fl-bg2: #F2F0E5;
    --fl-text: #100F0F;
    --fl-text2: #6F6E69;
    --fl-orange: #DA702C;
    --fl-blue: #4385BE;
    --fl-green: #879A39;
    --fl-red: #D14D41;
    --fl-yellow: #D0A215;
    --fl-border: #E6E4D9;
    --fl-shadow: rgba(16,15,15,0.08);

    /* Flexoki Dark */
    --fd-bg: #1C1B1A;
    --fd-bg2: #282726;
    --fd-text: #CECDC3;
    --fd-text2: #878580;
    --fd-orange: #BC5215;
    --fd-blue: #6BB6FF;
    --fd-green: #879A39;
    --fd-red: #D14D41;
    --fd-yellow: #D0A215;
    --fd-border: #343331;
    --fd-shadow: rgba(255,255,255,0.05);
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: var(--ui-bg);
    color: var(--ui-text);
    height: 100vh;
    display: grid;
    grid-template-columns: 320px 1fr;
    grid-template-rows: 1fr auto;
    overflow: hidden;
  }

  /* ─── Controls Panel ─── */
  .controls {
    grid-row: 1 / 3;
    background: var(--ui-surface);
    border-right: 1px solid var(--ui-border);
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .controls h1 {
    font-size: 16px;
    font-weight: 700;
    color: var(--ui-accent);
    letter-spacing: 0.03em;
  }

  .controls h1 span {
    font-weight: 400;
    color: var(--ui-muted);
    font-size: 12px;
    display: block;
    margin-top: 2px;
  }

  .control-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .control-group label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--ui-muted);
  }

  /* Layout selector cards */
  .layout-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .layout-card {
    background: var(--ui-bg);
    border: 2px solid var(--ui-border);
    border-radius: 10px;
    padding: 12px 10px;
    cursor: pointer;
    text-align: center;
    transition: all 0.2s;
    position: relative;
  }

  .layout-card:hover {
    border-color: var(--ui-accent);
    background: rgba(218,112,44,0.05);
  }

  .layout-card.active {
    border-color: var(--ui-accent);
    background: rgba(218,112,44,0.1);
  }

  .layout-card .card-icon {
    font-size: 22px;
    margin-bottom: 4px;
    display: block;
  }

  .layout-card .card-name {
    font-size: 12px;
    font-weight: 600;
    color: var(--ui-text);
  }

  .layout-card .card-desc {
    font-size: 10px;
    color: var(--ui-muted);
    margin-top: 2px;
    line-height: 1.3;
  }

  /* Toggle row */
  .toggle-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 0;
  }

  .toggle-row span {
    font-size: 13px;
  }

  .toggle {
    width: 40px;
    height: 22px;
    background: var(--ui-border);
    border-radius: 11px;
    cursor: pointer;
    position: relative;
    transition: background 0.2s;
  }

  .toggle.on { background: var(--ui-accent); }

  .toggle::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    width: 16px;
    height: 16px;
    background: white;
    border-radius: 50%;
    transition: transform 0.2s;
  }

  .toggle.on::after { transform: translateX(18px); }

  /* Filter buttons */
  .filter-btns {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .filter-btn {
    padding: 5px 12px;
    font-size: 12px;
    background: var(--ui-bg);
    border: 1px solid var(--ui-border);
    border-radius: 6px;
    color: var(--ui-text);
    cursor: pointer;
    transition: all 0.2s;
  }

  .filter-btn:hover { border-color: var(--ui-accent); color: var(--ui-accent); }
  .filter-btn.active { background: var(--ui-accent); border-color: var(--ui-accent); color: white; }

  /* Pros/Cons box */
  .pros-cons {
    background: var(--ui-bg);
    border-radius: 10px;
    padding: 14px;
    font-size: 12px;
    line-height: 1.6;
  }

  .pros-cons .section-label {
    font-weight: 700;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 4px;
  }

  .pros-cons .pro { color: #879A39; }
  .pros-cons .con { color: #D14D41; }
  .pros-cons ul { list-style: none; margin: 0 0 8px 0; padding: 0; }
  .pros-cons li::before { margin-right: 6px; }
  .pros-cons .pro-item::before { content: '+'; color: #879A39; font-weight: 700; }
  .pros-cons .con-item::before { content: '−'; color: #D14D41; font-weight: 700; }

  /* ─── Preview Area ─── */
  .preview-wrap {
    overflow-y: auto;
    padding: 0;
    display: flex;
    flex-direction: column;
  }

  .preview-frame {
    flex: 1;
    overflow-y: auto;
    transition: background 0.3s;
  }

  .preview-frame.light {
    background: var(--fl-bg);
    color: var(--fl-text);
  }

  .preview-frame.dark {
    background: var(--fd-bg);
    color: var(--fd-text);
  }

  .preview-inner {
    max-width: 800px;
    margin: 0 auto;
    padding: 40px 24px;
    font-family: Calibri, Candara, 'Segoe UI', Optima, Arial, sans-serif;
    font-size: 18px;
    line-height: 1.7;
  }

  /* ─── Prompt Output ─── */
  .prompt-area {
    background: var(--ui-surface);
    border-top: 1px solid var(--ui-border);
    padding: 16px 24px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }

  .prompt-text {
    flex: 1;
    font-size: 13px;
    line-height: 1.5;
    color: var(--ui-muted);
    font-family: 'SF Mono', 'Fira Code', monospace;
    max-height: 80px;
    overflow-y: auto;
  }

  .copy-btn {
    padding: 8px 16px;
    background: var(--ui-accent);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    transition: background 0.2s;
    flex-shrink: 0;
  }

  .copy-btn:hover { background: var(--ui-accent-hover); }

  /* ═══════════════════════════════════════════
     PREVIEW STYLES — Flexoki Design System
     ═══════════════════════════════════════════ */

  /* ─── Shared ─── */
  .p-header {
    margin-bottom: 1.8em;
  }

  .p-header h2 {
    font-size: 1.4em;
    font-weight: 700;
    margin-bottom: 0.3em;
  }

  .p-header .p-subtitle {
    font-size: 0.85em;
    line-height: 1.5;
    padding: 0.6em 0;
    border-left: 3px solid;
    padding-left: 0.8em;
    font-style: italic;
  }

  .light .p-header .p-subtitle { color: var(--fl-text2); border-color: var(--fl-border); }
  .dark .p-header .p-subtitle { color: var(--fd-text2); border-color: var(--fd-border); }

  .p-filters {
    display: flex;
    gap: 8px;
    margin-bottom: 1.6em;
    flex-wrap: wrap;
  }

  .p-filter-btn {
    padding: 6px 16px;
    font-size: 0.75em;
    font-weight: 500;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid;
    background: transparent;
    text-transform: lowercase;
  }

  .light .p-filter-btn {
    border-color: var(--fl-border);
    color: var(--fl-text2);
  }
  .light .p-filter-btn:hover,
  .light .p-filter-btn.active {
    background: var(--fl-orange);
    color: white;
    border-color: var(--fl-orange);
  }

  .dark .p-filter-btn {
    border-color: var(--fd-border);
    color: var(--fd-text2);
  }
  .dark .p-filter-btn:hover,
  .dark .p-filter-btn.active {
    background: var(--fd-orange);
    color: white;
    border-color: var(--fd-orange);
  }

  .p-section-title {
    font-size: 0.7em;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 600;
    margin: 1.8em 0 0.8em;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .p-section-title::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    display: inline-block;
  }

  .light .p-section-title { color: var(--fl-text2); }
  .light .p-section-title::before { background: var(--fl-orange); }
  .dark .p-section-title { color: var(--fd-text2); }
  .dark .p-section-title::before { background: var(--fd-orange); }

  /* Star rating */
  .stars { color: var(--fl-yellow); font-size: 0.8em; letter-spacing: 1px; }
  .dark .stars { color: var(--fd-yellow); }

  .cat-pill {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.65em;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .light .cat-pill.book { background: rgba(218,112,44,0.12); color: var(--fl-orange); }
  .light .cat-pill.non-book { background: rgba(67,133,190,0.12); color: var(--fl-blue); }
  .dark .cat-pill.book { background: rgba(188,82,21,0.2); color: #e8853f; }
  .dark .cat-pill.non-book { background: rgba(107,182,255,0.15); color: var(--fd-blue); }

  /* ─── Option A: Card Grid ─── */
  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 14px;
  }

  .note-card {
    border-radius: 14px;
    padding: 20px;
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
    border-left: 3px solid transparent;
  }

  .note-card:hover {
    transform: translateY(-3px);
  }

  .light .note-card {
    background: var(--fl-bg);
    box-shadow: 0 2px 8px var(--fl-shadow), 0 1px 3px var(--fl-shadow);
  }
  .light .note-card:hover {
    box-shadow: 0 8px 24px var(--fl-shadow), 0 2px 8px var(--fl-shadow);
  }
  .light .note-card.book-card { border-left-color: var(--fl-orange); }
  .light .note-card.non-book-card { border-left-color: var(--fl-blue); }

  .dark .note-card {
    background: var(--fd-bg2);
    box-shadow: 0 2px 8px var(--fd-shadow);
  }
  .dark .note-card:hover {
    box-shadow: 0 8px 24px var(--fd-shadow);
  }
  .dark .note-card.book-card { border-left-color: var(--fd-orange); }
  .dark .note-card.non-book-card { border-left-color: var(--fd-blue); }

  .note-card .card-title {
    font-size: 0.9em;
    font-weight: 600;
    margin-bottom: 6px;
    line-height: 1.3;
  }

  .light .note-card .card-title a { color: var(--fl-text); text-decoration: none; }
  .light .note-card .card-title a:hover { color: var(--fl-orange); }
  .dark .note-card .card-title a { color: var(--fd-text); text-decoration: none; }
  .dark .note-card .card-title a:hover { color: #e8853f; }

  .note-card .card-meta {
    font-size: 0.72em;
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
  }

  .light .note-card .card-meta { color: var(--fl-text2); }
  .dark .note-card .card-meta { color: var(--fd-text2); }

  /* ─── Option B: Magazine ─── */
  .magazine-hero {
    border-radius: 14px;
    padding: 32px;
    margin-bottom: 20px;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .magazine-hero:hover { transform: translateY(-2px); }

  .light .magazine-hero {
    background: var(--fl-bg);
    box-shadow: 0 4px 16px var(--fl-shadow);
  }
  .dark .magazine-hero {
    background: var(--fd-bg2);
    box-shadow: 0 4px 16px var(--fd-shadow);
  }

  .magazine-hero .hero-pill { margin-bottom: 12px; }

  .magazine-hero .hero-title {
    font-size: 1.4em;
    font-weight: 700;
    margin-bottom: 8px;
    line-height: 1.2;
  }

  .light .magazine-hero .hero-title { color: var(--fl-text); }
  .dark .magazine-hero .hero-title { color: var(--fd-text); }

  .magazine-hero .hero-excerpt {
    font-size: 0.85em;
    line-height: 1.5;
    margin-bottom: 12px;
  }

  .light .magazine-hero .hero-excerpt { color: var(--fl-text2); }
  .dark .magazine-hero .hero-excerpt { color: var(--fd-text2); }

  .magazine-hero .hero-meta {
    font-size: 0.75em;
    display: flex;
    gap: 12px;
    align-items: center;
  }

  .light .magazine-hero .hero-meta { color: var(--fl-text2); }
  .dark .magazine-hero .hero-meta { color: var(--fd-text2); }

  .magazine-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }

  .mag-card {
    border-radius: 12px;
    padding: 20px;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .mag-card:hover { transform: translateY(-2px); }

  .light .mag-card {
    background: var(--fl-bg);
    box-shadow: 0 2px 8px var(--fl-shadow);
  }
  .dark .mag-card {
    background: var(--fd-bg2);
    box-shadow: 0 2px 8px var(--fd-shadow);
  }

  .mag-card .mag-title {
    font-size: 0.9em;
    font-weight: 600;
    margin: 8px 0 6px;
    line-height: 1.3;
  }

  .light .mag-card .mag-title { color: var(--fl-text); }
  .dark .mag-card .mag-title { color: var(--fd-text); }

  .mag-card .mag-excerpt {
    font-size: 0.78em;
    line-height: 1.4;
    margin-bottom: 8px;
  }

  .light .mag-card .mag-excerpt { color: var(--fl-text2); }
  .dark .mag-card .mag-excerpt { color: var(--fd-text2); }

  .mag-card .mag-meta {
    font-size: 0.7em;
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .light .mag-card .mag-meta { color: var(--fl-text2); }
  .dark .mag-card .mag-meta { color: var(--fd-text2); }

  /* ─── Option C: Timeline + Sidebar ─── */
  .timeline-layout {
    display: grid;
    grid-template-columns: 180px 1fr;
    gap: 32px;
  }

  .tl-sidebar {
    position: sticky;
    top: 0;
  }

  .tl-sidebar .tl-stat-box {
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 12px;
  }

  .light .tl-stat-box { background: var(--fl-bg); box-shadow: 0 1px 4px var(--fl-shadow); }
  .dark .tl-stat-box { background: var(--fd-bg2); box-shadow: 0 1px 4px var(--fd-shadow); }

  .tl-stat-box .stat-num {
    font-size: 1.6em;
    font-weight: 700;
  }

  .light .tl-stat-box .stat-num { color: var(--fl-orange); }
  .dark .tl-stat-box .stat-num { color: #e8853f; }

  .tl-stat-box .stat-label {
    font-size: 0.7em;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .light .tl-stat-box .stat-label { color: var(--fl-text2); }
  .dark .tl-stat-box .stat-label { color: var(--fd-text2); }

  .tl-sidebar-filters {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: 16px;
  }

  .tl-sidebar-filter {
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 0.8em;
    cursor: pointer;
    border: none;
    text-align: left;
    transition: all 0.2s;
  }

  .light .tl-sidebar-filter { background: transparent; color: var(--fl-text2); }
  .light .tl-sidebar-filter:hover { background: var(--fl-bg2); }
  .light .tl-sidebar-filter.active { background: var(--fl-orange); color: white; }
  .dark .tl-sidebar-filter { background: transparent; color: var(--fd-text2); }
  .dark .tl-sidebar-filter:hover { background: var(--fd-bg2); }
  .dark .tl-sidebar-filter.active { background: var(--fd-orange); color: white; }

  .tl-main .tl-month-group { margin-bottom: 2em; }

  .tl-month-label {
    font-size: 0.8em;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-weight: 600;
    margin-bottom: 1em;
  }

  .light .tl-month-label { color: var(--fl-text2); }
  .dark .tl-month-label { color: var(--fd-text2); }

  .tl-entry {
    display: grid;
    grid-template-columns: 56px 1fr;
    gap: 1.2em;
    padding: 0.8em 0;
    align-items: start;
  }

  .light .tl-entry { border-top: 1px solid var(--fl-border); }
  .dark .tl-entry { border-top: 1px solid var(--fd-border); }

  .tl-day {
    font-size: 0.85em;
    font-weight: 600;
    text-align: right;
    padding-top: 2px;
  }

  .light .tl-day { color: var(--fl-orange); }
  .dark .tl-day { color: #e8853f; }

  .tl-content .tl-title {
    font-size: 0.95em;
    font-weight: 500;
    margin-bottom: 4px;
  }

  .light .tl-content .tl-title a { color: var(--fl-text); text-decoration: none; }
  .light .tl-content .tl-title a:hover { color: var(--fl-orange); }
  .dark .tl-content .tl-title a { color: var(--fd-text); text-decoration: none; }
  .dark .tl-content .tl-title a:hover { color: #e8853f; }

  .tl-content .tl-meta {
    font-size: 0.75em;
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .light .tl-content .tl-meta { color: var(--fl-text2); }
  .dark .tl-content .tl-meta { color: var(--fd-text2); }

  /* ─── Option D: Minimal List ─── */
  .min-year-label {
    font-size: 1.6em;
    font-weight: 700;
    letter-spacing: 0.02em;
    margin: 1.6em 0 0.6em;
  }

  .light .min-year-label { color: var(--fl-orange); }
  .dark .min-year-label { color: #e8853f; }

  .min-list { list-style: none; }

  .min-item {
    display: flex;
    align-items: center;
    padding: 10px 0;
    gap: 12px;
    transition: padding-left 0.2s;
    cursor: pointer;
  }

  .light .min-item { border-top: 1px solid var(--fl-border); }
  .dark .min-item { border-top: 1px solid var(--fd-border); }

  .min-item:hover { padding-left: 4px; }

  .min-item .min-indicator {
    width: 4px;
    height: 4px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .light .min-indicator.book { background: var(--fl-orange); }
  .light .min-indicator.non-book { background: var(--fl-blue); }
  .dark .min-indicator.book { background: #e8853f; }
  .dark .min-indicator.non-book { background: var(--fd-blue); }

  .min-item .min-title {
    flex: 1;
    font-size: 0.9em;
    font-weight: 500;
  }

  .light .min-item .min-title a { color: var(--fl-text); text-decoration: none; }
  .light .min-item .min-title a:hover { color: var(--fl-orange); }
  .dark .min-item .min-title a { color: var(--fd-text); text-decoration: none; }
  .dark .min-item .min-title a:hover { color: #e8853f; }

  .min-item .min-date {
    font-size: 0.82em;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .light .min-item .min-date { color: var(--fl-text2); }
  .dark .min-item .min-date { color: var(--fd-text2); }

  .min-item .min-arrow {
    opacity: 0;
    transition: opacity 0.2s;
    font-size: 0.8em;
    flex-shrink: 0;
  }

  .min-item:hover .min-arrow { opacity: 1; }

  .light .min-item .min-arrow { color: var(--fl-orange); }
  .dark .min-item .min-arrow { color: #e8853f; }

  .min-item .min-tag {
    font-size: 0.7em;
    padding: 1px 6px;
    border-radius: 3px;
    flex-shrink: 0;
  }

  .light .min-tag { background: var(--fl-bg2); color: var(--fl-text2); }
  .dark .min-tag { background: var(--fd-bg2); color: var(--fd-text2); }

  /* ─── Goodreads link ─── */
  .goodreads-link {
    font-size: 0.8em;
    margin-top: 2em;
    padding-top: 1em;
  }
  .light .goodreads-link { color: var(--fl-text2); border-top: 1px solid var(--fl-border); }
  .light .goodreads-link a { color: var(--fl-blue); }
  .dark .goodreads-link { color: var(--fd-text2); border-top: 1px solid var(--fd-border); }
  .dark .goodreads-link a { color: var(--fd-blue); }
</style>
</head>
<body>

<!-- ════════ Controls ════════ -->
<div class="controls">
  <h1>Notes Page Explorer <span>akshaychugh.xyz</span></h1>

  <div class="control-group">
    <label>Layout</label>
    <div class="layout-options">
      <div class="layout-card active" data-layout="card-grid" onclick="setLayout('card-grid')">
        <span class="card-icon">▦</span>
        <span class="card-name">Card Grid</span>
        <span class="card-desc">Bento cards, filters</span>
      </div>
      <div class="layout-card" data-layout="magazine" onclick="setLayout('magazine')">
        <span class="card-icon">▤</span>
        <span class="card-name">Magazine</span>
        <span class="card-desc">Hero + 2-col grid</span>
      </div>
      <div class="layout-card" data-layout="timeline" onclick="setLayout('timeline')">
        <span class="card-icon">▥</span>
        <span class="card-name">Timeline</span>
        <span class="card-desc">Sidebar + timeline</span>
      </div>
      <div class="layout-card" data-layout="minimal" onclick="setLayout('minimal')">
        <span class="card-icon">≡</span>
        <span class="card-name">Minimal List</span>
        <span class="card-desc">Enhanced current</span>
      </div>
    </div>
  </div>

  <div class="control-group">
    <label>Theme</label>
    <div class="toggle-row">
      <span id="theme-label">Light mode</span>
      <div class="toggle" id="theme-toggle" onclick="toggleTheme()"></div>
    </div>
  </div>

  <div class="control-group">
    <label>Filter</label>
    <div class="filter-btns">
      <button class="filter-btn active" data-filter="all" onclick="setFilter('all')">All</button>
      <button class="filter-btn" data-filter="book" onclick="setFilter('book')">Books</button>
      <button class="filter-btn" data-filter="non-book" onclick="setFilter('non-book')">Non-Books</button>
    </div>
  </div>

  <div class="control-group">
    <label>Options</label>
    <div class="toggle-row">
      <span>Show ratings</span>
      <div class="toggle on" id="ratings-toggle" onclick="toggleRatings()"></div>
    </div>
    <div class="toggle-row">
      <span>Show category tags</span>
      <div class="toggle on" id="tags-toggle" onclick="toggleTags()"></div>
    </div>
    <div class="toggle-row">
      <span>Goodreads link</span>
      <div class="toggle on" id="goodreads-toggle" onclick="toggleGoodreads()"></div>
    </div>
  </div>

  <div class="control-group">
    <label>Analysis</label>
    <div class="pros-cons" id="pros-cons"></div>
  </div>
</div>

<!-- ════════ Preview ════════ -->
<div class="preview-wrap">
  <div class="preview-frame light" id="preview-frame">
    <div class="preview-inner" id="preview"></div>
  </div>
</div>

<!-- ════════ Prompt Output ════════ -->
<div class="prompt-area">
  <div class="prompt-text" id="prompt-output"></div>
  <button class="copy-btn" onclick="copyPrompt()">Copy Prompt</button>
</div>

<script>
// ─── Data ───
const DATA = [
  { title: "How to level up with Claude Code", date: "2026-02-15", type: "non-book", excerpt: "A living document on getting better with AI-assisted coding" },
  { title: "The Mundanity of Excellence", date: "2025-12-13", type: "book", rating: 5, excerpt: "Excellence is mundane — it's about doing small things consistently well" },
  { title: "Catching The Big Fish", date: "2025-10-11", type: "book", rating: 4, excerpt: "David Lynch on meditation, consciousness, and creativity" },
  { title: "Deep Work", date: "2025-08-29", type: "book", rating: 5, excerpt: "Cal Newport's rules for focused success in a distracted world" },
  { title: "The Collector's Fallacy", date: "2025-08-04", type: "non-book", excerpt: "Collecting information is not the same as learning it" },
  { title: "An Astronaut's Guide to Life on Earth", date: "2024-11-07", type: "book", rating: 5, excerpt: "Chris Hadfield on preparation, humility, and sweating the small stuff" },
  { title: "Do The Work", date: "2024-08-17", type: "book", rating: 4, excerpt: "Steven Pressfield on overcoming resistance and shipping creative work" },
  { title: "How To Get Rich", date: "2023-01-21", type: "book", rating: 4, excerpt: "Felix Dennis's brutally honest guide to building wealth" },
  { title: "Dopamine Nation", date: "2022-11-25", type: "book", rating: 5, excerpt: "Anna Lembke on finding balance in the age of indulgence" },
];

const PROS_CONS = {
  'card-grid': {
    pros: ['Matches homepage bento aesthetic', 'Scannable at a glance', 'Clear visual hierarchy with accent borders'],
    cons: ['Can feel sparse with few entries', 'Less information density than a list']
  },
  'magazine': {
    pros: ['Editorial feel, highlights latest work', 'Visually rich and engaging', 'Good for showcasing featured content'],
    cons: ['Heavier than rest of site', 'Hero card may feel forced with book notes', 'Most departure from current style']
  },
  'timeline': {
    pros: ['Sidebar gives useful stats at a glance', 'Consistent with TIL page pattern', 'Good chronological narrative'],
    cons: ['Sidebar can feel empty with few filters', 'More complex layout to maintain', 'Redundant with TIL approach']
  },
  'minimal': {
    pros: ['Most consistent with writings page', 'Highest information density', 'Familiar, zero learning curve', 'Easiest to implement'],
    cons: ['Less visually distinctive', 'Notes page looks same as writings', 'Fewer visual cues for content type']
  }
};

// ─── State ───
const state = {
  layout: 'card-grid',
  theme: 'light',
  filter: 'all',
  showRatings: true,
  showTags: true,
  showGoodreads: true
};

// ─── Helpers ───
function formatDate(dateStr) {
  const d = new Date(dateStr + 'T00:00:00');
  return d.toLocaleDateString('en-GB', { day: '2-digit', month: 'short' });
}

function formatMonthYear(dateStr) {
  const d = new Date(dateStr + 'T00:00:00');
  return d.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
}

function getDay(dateStr) {
  const d = new Date(dateStr + 'T00:00:00');
  const day = d.getDate();
  const s = ['th','st','nd','rd'];
  const v = day % 100;
  return day + (s[(v-20)%10] || s[v] || s[0]);
}

function getYear(dateStr) { return dateStr.slice(0, 4); }

function starsHTML(rating) {
  if (!rating || !state.showRatings) return '';
  return `<span class="stars">${'★'.repeat(rating)}${'☆'.repeat(5-rating)}</span>`;
}

function catPillHTML(type) {
  if (!state.showTags) return '';
  const label = type === 'book' ? 'book' : 'non-book';
  return `<span class="cat-pill ${type}">${label}</span>`;
}

function filtered() {
  if (state.filter === 'all') return DATA;
  return DATA.filter(d => d.type === state.filter);
}

function goodreadsHTML() {
  if (!state.showGoodreads) return '';
  return `<div class="goodreads-link">See all book recommendations on <a href="#">Goodreads</a> (maintained since Jan 2021).</div>`;
}

// ─── Renderers ───
function renderCardGrid() {
  const items = filtered();
  let html = `
    <div class="p-header">
      <h2>Notes and Reflections</h2>
      <div class="p-subtitle">Reflections from important books and non-books (articles, podcasts, videos). Ideas I found interesting, stuff I need constant reminding of.</div>
    </div>
    <div class="p-filters">
      <button class="p-filter-btn ${state.filter==='all'?'active':''}" onclick="setFilter('all')">all</button>
      <button class="p-filter-btn ${state.filter==='book'?'active':''}" onclick="setFilter('book')">books</button>
      <button class="p-filter-btn ${state.filter==='non-book'?'active':''}" onclick="setFilter('non-book')">non-books</button>
    </div>
    <div class="card-grid">
  `;
  items.forEach(item => {
    html += `
      <div class="note-card ${item.type}-card">
        <div class="card-title"><a href="#">${item.title}</a></div>
        <div class="card-meta">
          <span>${formatDate(item.date)}</span>
          ${catPillHTML(item.type)}
          ${starsHTML(item.rating)}
        </div>
      </div>
    `;
  });
  html += `</div>${goodreadsHTML()}`;
  return html;
}

function renderMagazine() {
  const items = filtered();
  if (items.length === 0) return '<p>No items match this filter.</p>';
  const hero = items[0];
  const rest = items.slice(1);

  let html = `
    <div class="p-header">
      <h2>Notes and Reflections</h2>
      <div class="p-subtitle">Reflections from important books and non-books (articles, podcasts, videos). Ideas I found interesting, stuff I need constant reminding of.</div>
    </div>
    <div class="p-filters">
      <button class="p-filter-btn ${state.filter==='all'?'active':''}" onclick="setFilter('all')">all</button>
      <button class="p-filter-btn ${state.filter==='book'?'active':''}" onclick="setFilter('book')">books</button>
      <button class="p-filter-btn ${state.filter==='non-book'?'active':''}" onclick="setFilter('non-book')">non-books</button>
    </div>
    <div class="magazine-hero">
      <div class="hero-pill">${catPillHTML(hero.type)}</div>
      <div class="hero-title">${hero.title}</div>
      <div class="hero-excerpt">${hero.excerpt}</div>
      <div class="hero-meta">
        <span>${formatDate(hero.date)}</span>
        ${starsHTML(hero.rating)}
      </div>
    </div>
  `;

  if (rest.length > 0) {
    html += '<div class="magazine-grid">';
    rest.forEach(item => {
      html += `
        <div class="mag-card">
          ${catPillHTML(item.type)}
          <div class="mag-title">${item.title}</div>
          <div class="mag-excerpt">${item.excerpt}</div>
          <div class="mag-meta">
            <span>${formatDate(item.date)}</span>
            ${starsHTML(item.rating)}
          </div>
        </div>
      `;
    });
    html += '</div>';
  }
  html += goodreadsHTML();
  return html;
}

function renderTimeline() {
  const items = filtered();
  const books = DATA.filter(d => d.type === 'book');
  const nonBooks = DATA.filter(d => d.type === 'non-book');

  // Group by month
  const groups = {};
  items.forEach(item => {
    const key = formatMonthYear(item.date);
    if (!groups[key]) groups[key] = [];
    groups[key].push(item);
  });

  let html = `
    <div class="p-header">
      <h2>Notes and Reflections</h2>
      <div class="p-subtitle">Reflections from important books and non-books (articles, podcasts, videos).</div>
    </div>
    <div class="timeline-layout">
      <div class="tl-sidebar">
        <div class="tl-stat-box">
          <div class="stat-num">${books.length}</div>
          <div class="stat-label">Book notes</div>
        </div>
        <div class="tl-stat-box">
          <div class="stat-num">${nonBooks.length}</div>
          <div class="stat-label">Articles &amp; more</div>
        </div>
        <div class="tl-sidebar-filters">
          <button class="tl-sidebar-filter ${state.filter==='all'?'active':''}" onclick="setFilter('all')">All</button>
          <button class="tl-sidebar-filter ${state.filter==='book'?'active':''}" onclick="setFilter('book')">Books</button>
          <button class="tl-sidebar-filter ${state.filter==='non-book'?'active':''}" onclick="setFilter('non-book')">Non-Books</button>
        </div>
      </div>
      <div class="tl-main">
  `;

  Object.keys(groups).forEach(monthLabel => {
    html += `
      <div class="tl-month-group">
        <div class="tl-month-label">${monthLabel}</div>
    `;
    groups[monthLabel].forEach(item => {
      html += `
        <div class="tl-entry">
          <div class="tl-day">${getDay(item.date)}</div>
          <div class="tl-content">
            <div class="tl-title"><a href="#">${item.title}</a></div>
            <div class="tl-meta">
              ${catPillHTML(item.type)}
              ${starsHTML(item.rating)}
            </div>
          </div>
        </div>
      `;
    });
    html += '</div>';
  });

  html += `</div></div>${goodreadsHTML()}`;
  return html;
}

function renderMinimal() {
  const items = filtered();

  // Group by year
  const years = {};
  items.forEach(item => {
    const y = getYear(item.date);
    if (!years[y]) years[y] = [];
    years[y].push(item);
  });

  let html = `
    <div class="p-header">
      <h2>Notes and Reflections</h2>
      <div class="p-subtitle">Reflections from important books and non-books (articles, podcasts, videos). Ideas I found interesting, stuff I need constant reminding of.</div>
    </div>
    <div class="p-filters">
      <button class="p-filter-btn ${state.filter==='all'?'active':''}" onclick="setFilter('all')">all</button>
      <button class="p-filter-btn ${state.filter==='book'?'active':''}" onclick="setFilter('book')">books</button>
      <button class="p-filter-btn ${state.filter==='non-book'?'active':''}" onclick="setFilter('non-book')">non-books</button>
    </div>
  `;

  Object.keys(years).sort((a,b) => b-a).forEach(year => {
    html += `<div class="min-year-label">${year}</div><ul class="min-list">`;
    years[year].forEach(item => {
      html += `
        <li class="min-item">
          <span class="min-indicator ${item.type}"></span>
          <span class="min-title"><a href="#">${item.title}</a></span>
          ${state.showTags ? `<span class="min-tag">${item.type === 'book' ? 'book' : 'non-book'}</span>` : ''}
          ${state.showRatings && item.rating ? `<span class="stars">${'★'.repeat(item.rating)}</span>` : ''}
          <span class="min-date">${formatDate(item.date)}</span>
          <span class="min-arrow">→</span>
        </li>
      `;
    });
    html += '</ul>';
  });

  html += goodreadsHTML();
  return html;
}

// ─── Main render ───
const renderers = {
  'card-grid': renderCardGrid,
  'magazine': renderMagazine,
  'timeline': renderTimeline,
  'minimal': renderMinimal
};

function renderPreview() {
  document.getElementById('preview').innerHTML = renderers[state.layout]();
}

function updateProsCons() {
  const pc = PROS_CONS[state.layout];
  const names = { 'card-grid': 'Card Grid', 'magazine': 'Magazine', 'timeline': 'Timeline + Sidebar', 'minimal': 'Minimal List' };
  let html = `<div style="font-weight:700; margin-bottom:8px; color:var(--ui-text)">${names[state.layout]}</div>`;
  html += '<div class="section-label pro">Pros</div><ul>';
  pc.pros.forEach(p => html += `<li class="pro-item">${p}</li>`);
  html += '</ul><div class="section-label con">Cons</div><ul>';
  pc.cons.forEach(c => html += `<li class="con-item">${c}</li>`);
  html += '</ul>';
  document.getElementById('pros-cons').innerHTML = html;
}

function updatePrompt() {
  const names = { 'card-grid': 'Card Grid', 'magazine': 'Magazine Layout', 'timeline': 'Timeline + Sidebar', 'minimal': 'Minimal List (Enhanced)' };
  const parts = [`Redesign my /notes/ page (currently at reflections.md) using a "${names[state.layout]}" layout.`];

  if (state.layout === 'card-grid') {
    parts.push('Use a responsive card grid with 14px border-radius, subtle shadows, and a colored left-border accent (orange for books, blue for non-books). Add hover lift effect. Include filter buttons at the top for All/Books/Non-Books.');
  } else if (state.layout === 'magazine') {
    parts.push('Feature the latest note as a large hero card at the top with title, excerpt, date, and category pill. Below, display remaining notes in a 2-column grid of smaller cards, each with a category pill, title, excerpt, and date.');
  } else if (state.layout === 'timeline') {
    parts.push('Use a split layout: a sticky sidebar on the left showing count stats (N book notes, N articles) and filter buttons, and a main area with a chronological timeline grouped by month. Each entry shows day number on the left and title + metadata on the right, similar to the TIL page but more spacious.');
  } else if (state.layout === 'minimal') {
    parts.push('Keep the minimal list style but add filter buttons matching the /writings/ page, year-based grouping with large orange year headers, right-aligned dates, a small colored dot indicator for category (orange=book, blue=non-book), and a subtle arrow that appears on hover.');
  }

  if (state.showRatings) parts.push('Show star ratings for books.');
  if (state.showTags) parts.push('Show category tags/pills.');
  if (state.showGoodreads) parts.push('Include a Goodreads profile link at the bottom.');
  parts.push(`Use the ${state.theme} mode Flexoki color palette. Keep it consistent with the existing site design system.`);

  document.getElementById('prompt-output').textContent = parts.join(' ');
}

function updateAll() {
  renderPreview();
  updateProsCons();
  updatePrompt();
}

// ─── Controls ───
function setLayout(layout) {
  state.layout = layout;
  document.querySelectorAll('.layout-card').forEach(c => c.classList.toggle('active', c.dataset.layout === layout));
  updateAll();
}

function toggleTheme() {
  const toggle = document.getElementById('theme-toggle');
  const frame = document.getElementById('preview-frame');
  state.theme = state.theme === 'light' ? 'dark' : 'light';
  toggle.classList.toggle('on', state.theme === 'dark');
  frame.classList.toggle('light', state.theme === 'light');
  frame.classList.toggle('dark', state.theme === 'dark');
  document.getElementById('theme-label').textContent = state.theme === 'light' ? 'Light mode' : 'Dark mode';
  updateAll();
}

function setFilter(filter) {
  state.filter = filter;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.toggle('active', b.dataset.filter === filter));
  updateAll();
}

function toggleRatings() {
  state.showRatings = !state.showRatings;
  document.getElementById('ratings-toggle').classList.toggle('on', state.showRatings);
  updateAll();
}

function toggleTags() {
  state.showTags = !state.showTags;
  document.getElementById('tags-toggle').classList.toggle('on', state.showTags);
  updateAll();
}

function toggleGoodreads() {
  state.showGoodreads = !state.showGoodreads;
  document.getElementById('goodreads-toggle').classList.toggle('on', state.showGoodreads);
  updateAll();
}

function copyPrompt() {
  const text = document.getElementById('prompt-output').textContent;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.querySelector('.copy-btn');
    btn.textContent = 'Copied!';
    setTimeout(() => btn.textContent = 'Copy Prompt', 1500);
  });
}

// Init
updateAll();
</script>
</body>
</html>
